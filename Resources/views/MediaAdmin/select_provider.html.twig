{% extends 'SonataAdminBundle:CRUD:action.html.twig' %}

{% block title %}{{ 'title_select_provider'|trans({}, 'SonataMediaBundle') }}{% endblock %}

{% block content %}
    {% if app.request.isxmlhttprequest %}
        <div class="modal-header modal-primary">
            <button class="close" data-dismiss="modal"><i class="icon-remove-sign"></i></button>
            {# TODO: add to config #}
            <h3>Select Media Provider</h3>
        </div>
        <div class="modal-body">
            {{ block('provider_selector') }}
        </div>
    {% else %}
        {{ block('provider_selector') }}
    {% endif %}
{% endblock %}

{% block provider_selector %}

<div class="box box-color box-bordered">
    <div class="box-title">
        <h3>
            <i class="icon-film"></i>
            {# TODO: set on configuration #}
        </h3>
    </div>
    <div class="box-content">
        <div class="row-fluid offset4 span4">
            {% for code, provider in providers %}
                <a class="btn btn-success btn-block" href="{{ admin.generateUrl('create', {'provider': provider.name}) }}">{{ provider.name|trans({}, 'SonataMediaBundle') }}</a>
            {% else %}
                <div class="alert alert-error">
                    {{ 'no_provider_available'|trans({}, 'SonataMediaBundle') }}
                </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
